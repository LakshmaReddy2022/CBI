"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _cache = require("./cache.js");

var _normalizeArgs = _interopRequireDefault(require("./normalizeArgs.js"));

var _callAndSuspend = _interopRequireDefault(require("./callAndSuspend.js"));

var _useUpdaters = _interopRequireDefault(require("./useUpdaters.js"));

var _default = (0, _normalizeArgs.default)(function useAsyncSafe() {
  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
    args[_key] = arguments[_key];
  }

  var memoized = _cache.useItem.apply(void 0, args);

  (0, _useUpdaters.default)(memoized, args);

  if (memoized.value) {
    return memoized.value;
  }

  if (!memoized.suspender) {
    (0, _callAndSuspend.default)(args, memoized);
  }

  throw memoized.suspender;
});

exports.default = _default;
//# sourceMappingURL=useAsyncSafe.js.map